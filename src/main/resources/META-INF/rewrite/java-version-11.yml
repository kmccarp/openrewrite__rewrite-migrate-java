#
# Copyright 2022 the original author or authors.
# <p>
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# <p>
# https://www.apache.org/licenses/LICENSE-2.0
# <p>
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
---
type: specs.openrewrite.org/v1beta/recipe
name: org.openrewrite.java.migrate.MigrateToJava11
displayName: Migrate to Java 11 from Java 8 through 10
description: >
  This recipe will apply changes commonly needed when upgrading to Java 11. Specifically, for those applications that
  are built on Java 8, this recipe will update and add dependencies on J2EE libraries that are no longer directly
  bundled with the JDK. This recipe will also replace deprecated API with equivalents when there is a clear migration
  strategy. Build files will also be updated to use Java 11 as the target/source and plugins will be also be upgraded
  to versions that are compatible with Java 11.
tags:
  - java11
  - jaxb
  - jaxws
  - deprecated
  - jakarta

recipeList:
  - org.openrewrite.java.migrate.UseJavaUtilBase64
  # Add an explicit JAXB/JAX-WS runtime and upgrade the dependencies to Jakarta EE 8
  - org.openrewrite.java.migrate.jakarta.UpdateJaxbRuntimeToJakartaEE8:
      runtime: glassfish
  - org.openrewrite.java.migrate.jakarta.UpdateJaxwsRuntimeToJakartaEE8
  - org.openrewrite.java.migrate.javax.AddInjectDependencies
  # Add jdeprscan plugin to a maven-based build.
  - org.openrewrite.java.migrate.AddJDeprScanPlugin
  # Remediate deprecations
  - org.openrewrite.java.cleanup.BigDecimalRoundingConstantsToEnums
  - org.openrewrite.java.cleanup.PrimitiveWrapperClassConstructorToValueOf
  - org.openrewrite.java.migrate.concurrent.JavaConcurrentAPIs
  - org.openrewrite.java.migrate.lang.JavaLangAPIs
  - org.openrewrite.java.migrate.logging.JavaLoggingAPIs
  - org.openrewrite.java.migrate.net.JavaNetAPIs
  - org.openrewrite.java.migrate.sql.JavaSqlAPIs
  - org.openrewrite.java.migrate.javax.JavaxLangModelUtil
  - org.openrewrite.java.migrate.javax.JavaxManagementMonitorAPIs
  - org.openrewrite.java.migrate.javax.JavaxXmlStreamAPIs
  - org.openrewrite.java.migrate.cobertura.RemoveCoberturaMavenPlugin
  - org.openrewrite.java.migrate.wro4j.UpgradeWro4jMavenPluginVersion
  - org.openrewrite.java.migrate.jacoco.UpgradeJaCoCoMavenPluginVersion
  - org.openrewrite.java.migrate.UpdateMavenToJava11
  - org.openrewrite.java.migrate.util.JavaUtilAPIs
  - org.openrewrite.java.migrate.util.OptionalNotPresentToIsEmpty
  - org.openrewrite.java.migrate.util.OptionalNotEmptyToIsPresent
---
type: specs.openrewrite.org/v1beta/recipe
name: org.openrewrite.java.migrate.UpdateMavenToJava11
displayName: Change Maven Java version property values to 11
description: Change maven.compiler.source and maven.compiler.target values to 11.
recipeList:
  - org.openrewrite.maven.ChangePropertyValue:
      key: java.version
      newValue: 11
      addIfMissing: false
  - org.openrewrite.maven.ChangePropertyValue:
      key: maven.compiler.source
      newValue: 11
      addIfMissing: false
  - org.openrewrite.maven.ChangePropertyValue:
      key: maven.compiler.target
      newValue: 11
      addIfMissing: false
